
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Raspberry Pi Basic Setup for StrangeBrew Elsinore</title>
    <meta name="description" content="">
    <meta name="author" content="Doug Edey">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/css/1.4.0/bootstrap.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="topbar">
      <div class="fill">
        <div class="container">
          <a class="brand" href="/">Dougs Doings</a>
          <ul class="nav">
            
            
            


  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="page-header">
  <h1>Raspberry Pi Basic Setup for StrangeBrew Elsinore <small>Thanks to Cank!</small></h1>
</div>

<div class="row">
  <div class="span14">
    <p>This is very kindly provided by <a href="http://www.homebrewtalk.com/f170/raspberry-pi-strangebrew-elsinore-basic-setup-463590/">HBT User Cank</a></p>

<h3 id="setup-the-operating-system">Setup the Operating System</h3>

<p><a href="http://www.raspberrypi.org/downloads">Download and install latest NOOBS</a></p>

<p>Install Raspbian Operating system and set it up based on your location.</p>

<h3 id="setup-the-hardware">Setup the Hardware</h3>

<p><a href="https://www.cl.cam.ac.uk/projects/raspberrypi/tutorials/temperature/">Set up your DS18 probes</a></p>

<p>Then run this code in the LXTerminal to automatically load the One-Wire modules on start up</p>

<p>Open /etc/modules to edit</p>

<pre><code>sudo nano /etc/modules
</code></pre>

<p>Add these lines to the bottom of the file /etc/modules</p>

<pre><code>w1-gpio
w1-therm
</code></pre>

<p>Then reboot</p>

<pre><code>sudo reboot
</code></pre>

<h3 id="download-elsinore">Download Elsinore</h3>

<p>Download the SB_Elsinore_Server from git</p>

<pre><code>git clone https://github.com/DougEdey/SB_Elsinore_Server.git ~/BrewServer
</code></pre>

<p>Switch directories</p>

<pre><code>cd ~/BrewServer
</code></pre>

<p>Run Elsinore</p>

<pre><code>sudo java -jar Elsinore.jar
</code></pre>

<h3 id="choosing-the-gpio-pins">Choosing the GPIO Pins</h3>
<p>See this <a href="http://www.homebrewtalk.com/f170/raspberry-pi-strangebrew-elsinore-basic-setup-463590/index3.html#post5986888">post</a> to make sure you use the correct GPIO pins for output and you don’t choose one that is in the default HIGH state when the Pi boots up!!!</p>

<p><strong>It is highly recommended you setup a KILL SWITCH that will terminate the negative and/or the positive to the SSRs. This is a safety feature and allows you to kill the SSRs without going through the UI</strong></p>

<h3 id="first-time-setup">First time setup</h3>

<p>It will run some lines of code then show a list of your sensors and ask you to:</p>

<pre><code>Select the input, enter "r" to refresh, or use "pump &amp;ltname&amp;gt &amp;ltgpio&amp;gt" to add a pump
Type "volume" to start volume calibration
Type "timer &amp;ltname&amp;gt" to add a timer
</code></pre>

<p><img src="http://cdn.homebrewtalk.com/attachments/f170/183770d1394036656-raspberry-pi-strangebrew-elsinore-basic-setup-elsinoresetup1.jpg" alt="Initial Setup" /></p>

<h3 id="some-errors">Some errors</h3>

<p>If you see</p>

<pre><code>"java.net.ConnectException: Connection refused"
</code></pre>

<p>This means Elsinore is looking for OWFS (the full stacktrace will have OWFS in it) and OWFS isn’t enabled on your system. There was a bug that caused this after restarting Elsinore. This has been <a href="https://github.com/DougEdey/SB_Elsinore_Server/commit/443ad3b69d6100db73b2afe9af37d749e3b4a860">fixed</a>. </p>

<p>If you get an error at this point saying it can’t see your sensor check out this <a href="http://www.homebrewtalk.com/f170/raspberry-pi-strangebrew-elsinore-basic-setup-463590/#post5969791">post</a>.</p>

<p>It might ask you about switching to OWFS. Say No.</p>

<h3 id="setting-up-the-system">Setting up the System</h3>

<p>At this point enter the number of the sensor you want to set up and hit enter. (I only had one so I entered “1” and hit enter.
It will ask you to name it. (I named mine “HLT”)
Then it ask you what GPIO output the SSR is hooked up to so it knows which pin to turn on and off based on the Temperature reading or your sensor. 
I used “GPIO27” which is pin 13
If you just want a temperature reading, say for mash tun or cooled wort, leave it blank and hit enter.
I then typed</p>

<pre><code>timer Mash
timer Boil
pump Pump1 GPIO22

quit
</code></pre>

<p><img src="http://cdn.homebrewtalk.com/attachments/f170/183771d1394036656-raspberry-pi-strangebrew-elsinore-basic-setup-elsinoresetup2.jpg" alt="Setup an output" /></p>

<p>It will tell you:</p>

<pre><code>Updating config file, please check it in elsinore.cfg.new
Config file updated. Please copy it from rpibrew.cfg.new to rpibrew.cfg to use the data
You may need to do this as root
Saving HLT with probe 28-00000XXXXXX
Creating element of general
Creating on configDoc base
</code></pre>

<h3 id="copying-the-config-file">Copying the config file</h3>

<p>If it didn’t create this last file, type this:</p>

<pre><code>cp elsinore.cfg.new elsinore.cfg
</code></pre>

<h3 id="running-and-using-elsinore">Running and using Elsinore</h3>

<p>Then run:</p>

<pre><code>sudo java -jar Elsinore.jar
</code></pre>

<p>and in a web browser go to the Raspberry Pi IP address</p>

<pre><code>192.168.1.XX:8080/controller
</code></pre>

<p>You should see:
<img src="http://cdn.homebrewtalk.com/attachments/f170/183772d1394036656-raspberry-pi-strangebrew-elsinore-basic-setup-elsinore3.jpg" alt="Web Interface" /></p>

<h3 id="stopping-elsinore">Stopping elsinore</h3>

<p>Stops the application</p>

<pre><code>Ctrl-C
</code></pre>

<p>The last photo is of a breadboard that I have leds hooked to my gpio output pins for the pump(green led) and the HLT ssr(white led) when I turn the pump on the green light comes on, when I send a command for the HLT it turns the white led on based on duty cycle.
Pretty sweet!!!</p>

<p><img src="http://cdn.homebrewtalk.com/attachments/f170/183773d1394036656-raspberry-pi-strangebrew-elsinore-basic-setup-img_4392-1-.jpg" alt="Breadboard" /></p>

  </div>
</div>


      </div>

      <footer>
        <p>&copy; Doug Edey 2012 
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div> <!-- /container -->

    
  </body>
</html>

